#include <stdio.h>
#include <stdlib.h>
    
int strlength(char* str)
{
  int i;
  i=0;

  while (str[i]!='\0')
    {
      i++;
    }

  return i;
}

char* enleve (char* str) {

  int i=0;
  int j=0;
  char* res;
 while (str[i]!='\0')
   {
     if(str[i]=='>')
       {
	 //printf("%d-%c\n",j,str[i]);
	 res[j]=',';
	 ++j;
	 ++i;
       }
     else if ((str[i]>='0' && str[i]<='9') || (str[i]>='a' && str[i]<='z') || (str[i]>='A' && str[i]<='Z'))
       {
	 //printf("%d-%c\n",j,str[i]);
	 res[j]=str[i];
	 ++j;
	 ++i;
       }
     else if (str[i]==',')
       {
	 res[j]=str[i];
	 ++j;
	 ++i;
       }
     else 
       ++i;
   }
 res[j]='\0';

 return res;
}

char** split(char* str, char delim, int* nb) {
  *nb = 1;
  char* tmp;
  
  for (tmp = str; *tmp != '\0'; ++tmp) {
    if (*tmp == delim)
      ++(*nb);  
  }
  
  char** res = (char**) malloc(sizeof(char*) * (*nb));
  tmp = str;
  
  int i, j;   
  for (i = 0; i < (*nb); ++i) {
    int sizestr = 0;
    
    char* tmp2;
    for (tmp2 = tmp; *tmp2 != '\0' && *tmp2 != delim; ++tmp2) 
      sizestr++;
    
    res[i] = (char*) malloc(sizeof(char) * (sizestr + 1));
      
    for (j = 0; j < sizestr; ++j) 
      res[i][j] = tmp[j];
    res[i][j] = '\0';
    
    tmp = tmp2 + 1;
  } 
  return res;
}

/*char* subs(char* regle[],char* str,int* fois) {
  int i,j,k,l,m;
  char* tmp;
  char* res;
  tmp=str;

  for(i=0;i<=*fois;++i)
    {
      for(j=0,l=0;tmp[j]!='\0';++j,)
	{
	  if(tmp[j]==regle[k])
	    {
	      char* res= (char*) malloc(sizeof(char))*(tmp + 2*regle[k]+1);
	      res[l]=
	    }
	}
    }

return
}*/

int main (int argc,char* argv[]) {

  char delim;
  int nb,taille,i;

  char* chaine=argv[1];
  char* mor=argv[2];

  int fois=*argv[3]-48;
  //printf("%d\n",fois);

  delim=',';
  taille=strlength(chaine);
  char* dors=enleve(chaine);
  //printf("%s\n",dors)
    printf("%d\n",taille);
  char** regle=split(dors,delim,&nb);
  //for(i=0; i<nb;i++)
  //printf("%d-\"%s\"\n",i+1,regle[i]);

  //char* res= malloc(sizeof(char)*1000);

  return 0;
}

for(j=0;res[l]!='\0';j++)
	{
	  if(regle[m][0]==str[l])
	    {
	      for(k=2;k<=regle[j][1]+1;k++)
		{
		  res[l]=*regle[j];
		  l++;
		}
	      m+=2;
	      l++;
	    }
	  l++;
	}
